{"version":3,"sources":["src/app/pages/payment-password/payment-password.page.html","src/app/pages/payment-password/payment-password.module.ts","src/app/pages/payment-password/payment-password.page.scss","src/app/pages/payment-password/payment-password.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,glFAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACUf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,mDAAA,CAAA,qBAAA;AAFb,KADqB,CAAvB;;AAkBA,QAAa,yBAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,yBAAyB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAXrC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,4CAAA,CAAA,cAAA,CADO,EAEP,2CAAA,CAAA,aAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,0DAAA,CAAA,kBAAA,CAJO,EAKP,gDAAA,CAAA,iBAAA,CALO,EAMP,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CANO,CADD;AASR,MAAA,YAAY,EAAE,CAAC,mDAAA,CAAA,qBAAA,CAAD;AATN,KAAT,CAWqC,CAAA,EAAzB,yBAAyB,CAAzB;;;;;;;;;;;;;;;;AC5Bb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,2rCAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACWf,QAAa,mBAAb;AAAA;AAAA;AAmBE,mCACU,MADV,EAEU,OAFV,EAGU,MAHV,EAIU,MAJV,EAIwB;AAAA;;AAHd,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,OAAA,GAAA,OAAA;AACA,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,MAAA,GAAA,MAAA;AAtBV,aAAA,QAAA,GAAW,EAAX;AACA,aAAA,SAAA,GAAY,EAAZ;AACA,aAAA,SAAA,GAAY,EAAZ;AACA,aAAA,QAAA,GAAW,KAAX;AACA,aAAA,SAAA,GAAY,KAAZ;AACA,aAAA,UAAA,GAAa,KAAb;AACA,aAAA,UAAA,GAAa,KAAb;AAEA,aAAA,aAAA,GAAgB,EAAhB;AACA,aAAA,cAAA,GAAiB,EAAjB;AACA,aAAA,cAAA,GAAiB,EAAjB;AAEA,aAAA,aAAA,GAAgB,KAAhB;AAEA,aAAA,MAAA,GAAc,EAAd;AAUE,YAAI,KAAK,GAAG,KAAK,MAAL,CAAY,oBAAZ,GAAmC,MAAnC,CAA0C,KAAtD;;AACA,YAAI,KAAJ,EAAW;AACT,eAAK,UAAL,GAAkB,KAAK,CAAC,UAAxB;AACA,eAAK,MAAL,GAAc,KAAK,CAAC,MAApB;AACD;AACF;;AA9BH;AAAA;AAAA,mCAgCU;AACN,eAAK,MAAL,GAAc,KAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,MAAL,CAAY,kBAApC,CAAd;AACD;AAlCH;AAAA;AAAA,wCAoCe;AACX,eAAK,SAAL,GAAiB,CAAC,KAAK,SAAvB;AACD;AAtCH;AAAA;AAAA,yCAwCgB;AACZ,eAAK,UAAL,GAAkB,CAAC,KAAK,UAAxB;AACD;AA1CH;AAAA;AAAA,yCA4CgB;AACZ,eAAK,UAAL,GAAkB,CAAC,KAAK,UAAxB;AACD;AA9CH;AAAA;AAAA,wCAgDqB;;;;;;;;;AACjB,yBAAK,aAAL,GAAqB,EAArB;;wBACK,KAAK,Q;;;;;;AACI,2BAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,yBAAzB,CAAN;;;AAAR,oBAAA,K;AACJ,yBAAK,aAAL,GAAqB,KAArB;;;;;;;;;AAEH;AAtDH;AAAA;AAAA,yCAwDsB;;;;;;;;;;AAClB,yBAAK,cAAL,GAAsB,EAAtB;;wBACK,KAAK,S;;;;;;AACI,2BAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,oBAAzB,CAAN;;;AAAR,oBAAA,K;AACJ,yBAAK,cAAL,GAAsB,KAAtB;;;;;wBACU,UAAU,IAAV,CAAe,KAAK,SAApB,C;;;;;;AAEE,2BAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,uBAAzB,CAAN;;;AAAR,oBAAA,M;AACJ,yBAAK,cAAL,GAAsB,MAAtB;;;;;;;;;AAEH;AAlEH;AAAA;AAAA,yCAoEsB;;;;;;;;;;AAClB,yBAAK,cAAL,GAAsB,EAAtB;;wBACK,KAAK,S;;;;;;AACI,2BAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,oBAAzB,CAAN;;;AAAR,oBAAA,K;AACJ,yBAAK,cAAL,GAAsB,KAAtB;;;;;0BACS,KAAK,SAAL,IAAkB,KAAK,S;;;;;;AACpB,2BAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,oBAAzB,CAAN;;;AAAR,oBAAA,O;AACJ,yBAAK,cAAL,GAAsB,OAAtB;;;;;;;;;AAEH;AA7EH;AAAA;AAAA,yCA+EsB;;;;;;;;;;yBACd,KAAK,Q;;;;;;AACP,2BAAM,KAAK,aAAL,EAAN;;;yBACI,KAAK,a;;;;;;;;;AAKX,2BAAM,KAAK,cAAL,EAAN;;;yBACI,KAAK,c;;;;;;;;;AAIT,2BAAM,KAAK,cAAL,EAAN;;;yBACI,KAAK,c;;;;;;;;AAIT;AACA,yBAAK,aAAL,GAAqB,IAArB;AAEA,oBAAA,UAAU,CAAC;AAAA,6BAAY,kCAAA,CAAA,WAAA,CAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,8CAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACnB,qCAAK,aAAL,GAAqB,KAArB,CADmB,CAEnB;;AAFmB,qCAGf,KAAK,UAHU;AAAA;AAAA;AAAA;;AAIb,gCAAA,QAJa,GAIF,KAAK,MAAL,CAAY,cAAZ,CAA2B,KAAK,UAAhC,EAA4C,KAAK,SAAjD,CAJE;AAKjB,qCAAK,MAAL,CAAY,OAAZ,GAAsB,QAAtB;AACA,qCAAK,MAAL,CAAY,UAAZ;AACA,gCAAA,UAAU,CAAC;AAAA,yCAAY,kCAAA,CAAA,WAAA,CAAA,CAAA,MAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,0DAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACT,mDAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,yBAAzB,CAAN;;AADS;AACjB,4CAAA,KADiB;AAErB,iDAAK,MAAL,CAAY,KAAZ,CAAkB,KAAlB;;AAFqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAA,EAAZ;AAAA,iCAAD,EAGP,EAHO,CAAV;AAIA,gCAAA,UAAU,CAAC,YAAK;AACd,sCAAI,MAAI,CAAC,MAAL,KAAgB,QAApB,EAA8B;AAC5B,oCAAA,MAAI,CAAC,OAAL,CAAa,GAAb;AACD,mCAFD,MAEO;AACL,oCAAA,MAAI,CAAC,OAAL,CAAa,YAAb,CAA0B,QAA1B;AACD;AAEF,iCAPS,EAOP,IAPO,CAAV;AAXiB;AAAA;;AAAA;AAoBjB;AACA,qCAAK,aAAL,GAAqB,KAArB;AArBiB;AAsBL,uCAAM,KAAK,MAAL,CAAY,YAAZ,CAAyB,gBAAzB,CAAN;;AAtBK;AAsBb,gCAAA,KAtBa;AAuBjB;AACA,qCAAK,MAAL,CAAY,KAAZ,CAAkB,KAAlB;AACA,gCAAA,UAAU,CAAC,YAAK;AACd,kCAAA,MAAI,CAAC,OAAL,CAAa,GAAb;AACD,iCAFS,EAEP,IAFO,CAAV;;AAzBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAA,EAAZ;AAAA,qBAAD,EA6BP,EA7BO,CAAV;;;;;;;;;AA8BD;AAlIH;;AAAA;AAAA,OAAA;;;;cAoBoB,6DAAA,CAAA,eAAA;;cACC,2CAAA,CAAA,eAAA;;cACD,6DAAA,CAAA,eAAA;;cACA,4CAAA,CAAA,QAAA;;;;AAvBP,IAAA,mBAAmB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAL/B,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,sBADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,yGAAA,CAAA,EAAA,OAFS;;;;AAAA,KAAV,CAK+B,E,uEAoBZ,6DAAA,CAAA,eAAA,C,EACC,2CAAA,CAAA,eAAA,C,EACD,6DAAA,CAAA,eAAA,C,EACA,4CAAA,CAAA,QAAA,C,EAvBY,CAAA,EAAnB,mBAAmB,CAAnB","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{ 'SET_PAYMENT_PASSWORD' | translate }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"input-password-wrapper\\\" *ngIf=\\\"isChange\\\">\\n      <div class=\\\"label\\\" translate=\\\"\\\">ORIGINAL_PASSWORD</div>\\n      <div class=\\\"input-wrapper\\\">\\n        <input (keyup)=\\\"checkPassword()\\\"  [type]=\\\"ifEyeOpen ? 'number' : 'password'\\\" inputmode=\\\"decimal\\\" [(ngModel)]=\\\"password\\\"\\n          placeholder=\\\"{{ 'INPUT_ORIGINAL_PASSWORD' | translate }}\\\">\\n      </div>\\n\\n      <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen()\\\" [ngClass]=\\\"ifEyeOpen ? 'eye-open' : 'eye-close'\\\">\\n      </div>\\n    </div>\\n\\n    <div class=\\\"error-text\\\" *ngIf=\\\"passwordError\\\">{{ passwordError }}</div>\\n\\n    <div class=\\\"input-password-wrapper\\\">\\n      <div class=\\\"label\\\" translate>NEW_PASSWORD</div>\\n      <div class=\\\"input-wrapper\\\">\\n        <input (keyup)=\\\"checkPassword1()\\\" [type]=\\\"ifEyeOpen1 ? 'number' : 'password'\\\" inputmode=\\\"decimal\\\" [(ngModel)]=\\\"password1\\\"\\n          placeholder=\\\"{{ 'PAYMENT_PASSWORD_RULE' | translate }}\\\">\\n      </div>\\n\\n      <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen1()\\\" [ngClass]=\\\"ifEyeOpen1 ? 'eye-open' : 'eye-close'\\\">\\n      </div>\\n    </div>\\n\\n    <div class=\\\"error-text\\\" *ngIf=\\\"passwordError1\\\">{{ passwordError1 }}</div>\\n\\n    <div class=\\\"input-password-wrapper\\\">\\n      <div class=\\\"label\\\" translate=\\\"\\\">CONFIRM_PASSWORD</div>\\n      <div class=\\\"input-wrapper\\\">\\n        <input (keyup)=\\\"checkPassword2()\\\" [type]=\\\"ifEyeOpen2 ? 'number' : 'password'\\\" [(ngModel)]=\\\"password2\\\"\\n          placeholder=\\\"{{ 'CONFIRM_PASSWORD' | translate }}\\\">\\n      </div>\\n\\n      <div class=\\\" eye\\\" tappable (click)=\\\"toggleEyeOpen2()\\\" [ngClass]=\\\"ifEyeOpen2 ? 'eye-open' : 'eye-close'\\\">\\n      </div>\\n    </div>\\n\\n    <div class=\\\"error-text\\\" *ngIf=\\\"passwordError2\\\">{{ passwordError2 }}</div>\\n\\n    <div class=\\\"buttons\\\">\\n      <div class=\\\"confirm-button\\\" [ngClass]=\\\"(passwordError || passwordError1 || passwordError2 || !password1 || !password2 || password1 != password2) ? 'disabled' : ''\\\"\\n      tappable (click)=\\\"changePassword()\\\" translate>CONFIRM</div>\\n    </div>\\n  </div>\\n</ion-content>\\n\\n<div class=\\\"lds-css ng-scope\\\" *ngIf=\\\"ifShowLoading\\\">\\n  <div class=\\\"lds-wrapper\\\">\\n    <div class=\\\"lds-flickr\\\">\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n    </div>\\n    <!-- <div class=\\\"progress\\\">{{ rate }}%</div> -->\\n  </div>\\n</div>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from '../../components/components.module';\nimport { TranslateModule } from \"@ngx-translate/core\";\nimport { PaymentPasswordPage } from './payment-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PaymentPasswordPage]\n})\nexport class PaymentPasswordPageModule {}\n","export default \".main {\\n  padding: 18px;\\n}\\n\\nion-content {\\n  --background: #fff;\\n}\\n\\n.container {\\n  padding: 20px var(--page-padding);\\n}\\n\\n.buttons {\\n  margin-top: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jeXBoZXIwMS9nby9zcmMvZ2l0aHViLmNvbS9jeXBoZXJpdW0vd2FsbGV0YXBwL3NyYy9hcHAvcGFnZXMvcGF5bWVudC1wYXNzd29yZC9wYXltZW50LXBhc3N3b3JkLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcGF5bWVudC1wYXNzd29yZC9wYXltZW50LXBhc3N3b3JkLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0FDQ0o7O0FERUE7RUFDSSxpQ0FBQTtBQ0NKOztBREVBO0VBQ0ksZ0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BheW1lbnQtcGFzc3dvcmQvcGF5bWVudC1wYXNzd29yZC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XG4gICAgcGFkZGluZzogMThweDtcbn1cblxuaW9uLWNvbnRlbnQge1xuICAgIC0tYmFja2dyb3VuZDogI2ZmZjtcbn1cblxuLmNvbnRhaW5lciB7XG4gICAgcGFkZGluZzogMjBweCB2YXIoLS1wYWdlLXBhZGRpbmcpO1xufVxuXG4uYnV0dG9ucyB7XG4gICAgbWFyZ2luLXRvcDogMzBweDtcbn0iLCIubWFpbiB7XG4gIHBhZGRpbmc6IDE4cHg7XG59XG5cbmlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiAjZmZmO1xufVxuXG4uY29udGFpbmVyIHtcbiAgcGFkZGluZzogMjBweCB2YXIoLS1wYWdlLXBhZGRpbmcpO1xufVxuXG4uYnV0dG9ucyB7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { HelperService } from '../../providers/helper/helper.service';\nimport { GlobalService } from '../../providers/global/global.service';\nimport { Platform, NavController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-payment-password',\n  templateUrl: './payment-password.page.html',\n  styleUrls: ['./payment-password.page.scss'],\n})\nexport class PaymentPasswordPage implements OnInit {\n  password = \"\";\n  password1 = \"\";\n  password2 = \"\";\n  isChange = false;\n  ifEyeOpen = false;\n  ifEyeOpen1 = false;\n  ifEyeOpen2 = false;\n\n  passwordError = \"\";\n  passwordError1 = \"\";\n  passwordError2 = \"\";\n\n  ifShowLoading = false;\n\n  wallet: any = {};\n  privateKey: any;\n  action: any;\n\n  constructor(\n    private helper: HelperService,\n    private navCtrl: NavController,\n    private global: GlobalService,\n    private router: Router,\n  ) { \n    let state = this.router.getCurrentNavigation().extras.state;\n    if (state) {\n      this.privateKey = state.privateKey;\n      this.action = state.action;\n    }\n  }\n\n  ngOnInit() {\n    this.wallet = this.global.gWalletList[this.global.currentWalletIndex];\n  }\n\n  toggleEyeOpen() {\n    this.ifEyeOpen = !this.ifEyeOpen;\n  }\n\n  toggleEyeOpen1() {\n    this.ifEyeOpen1 = !this.ifEyeOpen1;\n  }\n\n  toggleEyeOpen2() {\n    this.ifEyeOpen2 = !this.ifEyeOpen2;\n  }\n\n  async checkPassword() {\n    this.passwordError = \"\";\n    if (!this.password) {\n      let error = await this.helper.getTranslate('ORIGINAL_PASSWORD_EMPTY');\n      this.passwordError = error;\n    }\n  }\n\n  async checkPassword1() {\n    this.passwordError1 = \"\";\n    if (!this.password1) {\n      let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n      this.passwordError1 = error;\n    } else if (!/^\\d{6}$/.test(this.password1)) {\n      //密码格式错误\n      let error = await this.helper.getTranslate('PAYMENT_PASSWORD_RULE');\n      this.passwordError1 = error;\n    }\n  }\n\n  async checkPassword2() {\n    this.passwordError2 = \"\";\n    if (!this.password2) {\n      let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n      this.passwordError2 = error;\n    } else if (this.password2 != this.password1) {\n      let error = await this.helper.getTranslate('PASSEORD_DIFFERENT');\n      this.passwordError2 = error;\n    }\n  }\n\n  async changePassword() {\n    if (this.isChange) {\n      await this.checkPassword();\n      if (this.passwordError) {\n        return;\n      }\n    }\n\n    await this.checkPassword1();\n    if (this.passwordError1) {\n      return;\n    }\n\n    await this.checkPassword2();\n    if (this.passwordError2) {\n      return;\n    }\n\n    //开始修改密码\n    this.ifShowLoading = true;\n\n    setTimeout(async () => {\n        this.ifShowLoading = false;\n        //计算新的payment-keystore\n        if (this.privateKey) {\n          let keystore = this.helper.exportKeystore(this.privateKey, this.password1);\n          this.wallet.payment = keystore;\n          this.helper.saveWallet();\n          setTimeout(async () => {\n            let error = await this.helper.getTranslate('CHANGE_PASSWORD_SUCCEED');\n            this.helper.toast(error);\n          }, 50);\n          setTimeout(() => {\n            if (this.action !== 'create') {\n              this.navCtrl.pop();\n            } else {\n              this.navCtrl.navigateRoot('wallet');\n            }\n\n          }, 1000);\n        } else {\n          //密码错误\n          this.ifShowLoading = false;\n          let error = await this.helper.getTranslate('PASSWORD_ERROR');\n          // this.passwordError = error;\n          this.helper.toast(error);\n          setTimeout(() => {\n            this.navCtrl.pop();\n          }, 1000);\n        }\n    }, 50);\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"pages-payment-password-payment-password-module-es5.js"}