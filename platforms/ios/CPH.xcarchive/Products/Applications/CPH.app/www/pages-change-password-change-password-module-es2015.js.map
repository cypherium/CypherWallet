{"version":3,"sources":["./src/app/pages/change-password/change-password.page.html","./src/app/pages/change-password/change-password.module.ts","./src/app/pages/change-password/change-password.page.scss","./src/app/pages/change-password/change-password.page.ts"],"names":[],"mappings":"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","file":"pages-change-password-change-password-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>{{ 'CHANGE_PASSWORD' | translate }}</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <div class=\\\"container\\\">\\n        <div class=\\\"input-password-wrapper\\\">\\n            <div class=\\\"label\\\" translate=\\\"\\\">ORIGINAL_PASSWORD</div>\\n            <div class=\\\"input-wrapper\\\">\\n                <input (blur)=\\\"checkPassword()\\\" [type]=\\\"ifEyeOpen ? 'text' : 'password'\\\" [(ngModel)]=\\\"password\\\"\\n                    placeholder=\\\"{{ 'INPUT_ORIGINAL_PASSWORD' | translate }}\\\">\\n            </div>\\n\\n            <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen()\\\" [ngClass]=\\\"ifEyeOpen ? 'eye-open' : 'eye-close'\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"error-text\\\" *ngIf=\\\"passwordError\\\">{{ passwordError }}</div>\\n\\n        <div class=\\\"input-password-wrapper\\\">\\n            <div class=\\\"label\\\" translate>NEW_PASSWORD</div>\\n            <div class=\\\"input-wrapper\\\">\\n                <input (blur)=\\\"checkPassword1()\\\" [type]=\\\"ifEyeOpen1 ? 'text' : 'password'\\\" [(ngModel)]=\\\"password1\\\"\\n                    placeholder=\\\"{{ 'PASSWORD_RULE' | translate }}\\\">\\n            </div>\\n\\n            <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen1()\\\" [ngClass]=\\\"ifEyeOpen1 ? 'eye-open' : 'eye-close'\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"error-text\\\" *ngIf=\\\"passwordError1\\\">{{ passwordError1 }}</div>\\n\\n        <div class=\\\"input-password-wrapper\\\">\\n            <div class=\\\"label\\\" translate=\\\"\\\">CONFIRM_PASSWORD</div>\\n            <div class=\\\"input-wrapper\\\">\\n                <input (blur)=\\\"checkPassword2()\\\" [type]=\\\"ifEyeOpen2 ? 'text' : 'password'\\\" [(ngModel)]=\\\"password2\\\"\\n                    placeholder=\\\"{{ 'CONFIRM_PASSWORD' | translate }}\\\">\\n            </div>\\n\\n            <div class=\\\" eye\\\" tappable (click)=\\\"toggleEyeOpen2()\\\" [ngClass]=\\\"ifEyeOpen2 ? 'eye-open' : 'eye-close'\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"error-text\\\" *ngIf=\\\"passwordError2\\\">{{ passwordError2 }}</div>\\n\\n        <div class=\\\"buttons\\\">\\n            <div class=\\\"confirm-button\\\" tappable (click)=\\\"changePassword()\\\" translate>CONFIRM</div>\\n        </div>\\n    </div>\\n</ion-content>\\n\\n<div class=\\\"lds-css ng-scope\\\" *ngIf=\\\"ifShowLoading\\\">\\n    <div class=\\\"lds-wrapper\\\">\\n        <div class=\\\"lds-flickr\\\">\\n            <div></div>\\n            <div></div>\\n            <div></div>\\n        </div>\\n        <!-- <div class=\\\"progress\\\">{{ rate }}%</div> -->\\n    </div>\\n</div>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from '../../components/components.module';\nimport { ChangePasswordPage } from './change-password.page';\nimport { TranslateModule } from \"@ngx-translate/core\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChangePasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ChangePasswordPage]\n})\nexport class ChangePasswordPageModule { }\n","export default \".main {\\n  padding: 18px;\\n}\\n\\nion-content {\\n  --background: #fff;\\n}\\n\\n.container {\\n  padding: 20px var(--page-padding);\\n}\\n\\n.buttons {\\n  margin-top: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93c3MvZ28vc3JjL2dpdGh1Yi5jb20vY3lwaGVyaXVtL3dhbGxldGFwcC9zcmMvYXBwL3BhZ2VzL2NoYW5nZS1wYXNzd29yZC9jaGFuZ2UtcGFzc3dvcmQucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9jaGFuZ2UtcGFzc3dvcmQvY2hhbmdlLXBhc3N3b3JkLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0FDQ0o7O0FERUE7RUFDSSxpQ0FBQTtBQ0NKOztBREVBO0VBQ0ksZ0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYW5nZS1wYXNzd29yZC9jaGFuZ2UtcGFzc3dvcmQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW4ge1xuICAgIHBhZGRpbmc6IDE4cHg7XG59XG5cbmlvbi1jb250ZW50IHtcbiAgICAtLWJhY2tncm91bmQ6ICNmZmY7XG59XG5cbi5jb250YWluZXIge1xuICAgIHBhZGRpbmc6IDIwcHggdmFyKC0tcGFnZS1wYWRkaW5nKTtcbn1cblxuLmJ1dHRvbnMge1xuICAgIG1hcmdpbi10b3A6IDMwcHg7XG59IiwiLm1haW4ge1xuICBwYWRkaW5nOiAxOHB4O1xufVxuXG5pb24tY29udGVudCB7XG4gIC0tYmFja2dyb3VuZDogI2ZmZjtcbn1cblxuLmNvbnRhaW5lciB7XG4gIHBhZGRpbmc6IDIwcHggdmFyKC0tcGFnZS1wYWRkaW5nKTtcbn1cblxuLmJ1dHRvbnMge1xuICBtYXJnaW4tdG9wOiAzMHB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { HelperService } from '../../providers/helper/helper.service';\nimport { GlobalService } from '../../providers/global/global.service';\nimport { Platform, NavController } from '@ionic/angular';\n\n\n@Component({\n    selector: 'app-change-password',\n    templateUrl: './change-password.page.html',\n    styleUrls: ['./change-password.page.scss'],\n})\nexport class ChangePasswordPage implements OnInit {\n    password = \"\";\n    password1 = \"\";\n    password2 = \"\";\n\n    ifEyeOpen = false;\n    ifEyeOpen1 = false;\n    ifEyeOpen2 = false;\n\n    passwordError = \"\";\n    passwordError1 = \"\";\n    passwordError2 = \"\";\n\n    ifShowLoading = false;\n\n    wallet: any = {};\n\n    constructor(\n        private helper: HelperService,\n        private navCtrl: NavController,\n        private global: GlobalService,\n    ) { }\n\n    ngOnInit() {\n        this.wallet = this.global.gWalletList[this.global.currentWalletIndex];\n    }\n\n    toggleEyeOpen() {\n        this.ifEyeOpen = !this.ifEyeOpen;\n    }\n\n    toggleEyeOpen1() {\n        this.ifEyeOpen1 = !this.ifEyeOpen1;\n    }\n\n    toggleEyeOpen2() {\n        this.ifEyeOpen2 = !this.ifEyeOpen2;\n    }\n\n    async checkPassword() {\n        this.passwordError = \"\";\n        if (!this.password) {\n            let error = await this.helper.getTranslate('ORIGINAL_PASSWORD_EMPTY');\n            this.passwordError = error;\n        }\n    }\n\n    async checkPassword1() {\n        this.passwordError1 = \"\";\n        if (!this.password1) {\n            let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n            this.passwordError1 = error;\n        } else if (!/^[\\da-zA-Z]{6,18}$/.test(this.password1) || /^[\\d]+$/.test(this.password1) || /^[a-zA-Z]+$/.test(this.password1)) {\n            //密码格式错误\n            let error = await this.helper.getTranslate('PASSWORD_RULE');\n            this.passwordError1 = error;\n        }\n    }\n\n    async checkPassword2() {\n        this.passwordError2 = \"\";\n        if (!this.password2) {\n            let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n            this.passwordError2 = error;\n        } else if (this.password2 != this.password1) {\n            let error = await this.helper.getTranslate('PASSEORD_DIFFERENT');\n            this.passwordError2 = error;\n        }\n    }\n\n    async changePassword() {\n        await this.checkPassword();\n        if (this.passwordError) {\n            return;\n        }\n\n        await this.checkPassword1();\n        if (this.passwordError1) {\n            return;\n        }\n\n        await this.checkPassword2();\n        if (this.passwordError2) {\n            return;\n        }\n\n        //开始修改密码\n        this.ifShowLoading = true;\n\n        setTimeout(async () => {\n            //获取私钥\n            let ret = this.helper.decryptPrivateKey(this.wallet.keystore, this.password);\n            if (ret.flag) {\n                this.ifShowLoading = false;\n                //获取到私钥\n                let privateKey = ret.privateKey;\n                //计算新的keystore\n                let keystore = this.helper.exportKeystore(privateKey, this.password1);\n                this.wallet.keystore = keystore;\n                this.helper.saveWallet();\n                setTimeout(async () => {\n                    let error = await this.helper.getTranslate('CHANGE_PASSWORD_SUCCEED');\n\n                    this.helper.toast(error);\n                }, 50);\n                setTimeout(() => {\n                    this.navCtrl.pop();\n                }, 1000)\n            } else {\n                //密码错误\n                this.ifShowLoading = false;\n                let error = await this.helper.getTranslate('PASSWORD_ERROR');\n                this.passwordError = error;\n            }\n        }, 50)\n    }\n\n}\n"],"sourceRoot":"webpack:///"}