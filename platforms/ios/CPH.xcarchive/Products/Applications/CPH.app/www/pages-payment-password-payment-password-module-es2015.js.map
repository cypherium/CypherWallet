{"version":3,"sources":["./src/app/pages/payment-password/payment-password.page.html","./src/app/pages/payment-password/payment-password.module.ts","./src/app/pages/payment-password/payment-password.page.scss","./src/app/pages/payment-password/payment-password.page.ts"],"names":[],"mappings":"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","file":"pages-payment-password-payment-password-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{ 'SET_PAYMENT_PASSWORD' | translate }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"input-password-wrapper\\\" *ngIf=\\\"isChange\\\">\\n      <div class=\\\"label\\\" translate=\\\"\\\">ORIGINAL_PASSWORD</div>\\n      <div class=\\\"input-wrapper\\\">\\n        <input (keyup)=\\\"checkPassword()\\\"  [type]=\\\"ifEyeOpen ? 'number' : 'password'\\\" inputmode=\\\"decimal\\\" [(ngModel)]=\\\"password\\\"\\n          placeholder=\\\"{{ 'INPUT_ORIGINAL_PASSWORD' | translate }}\\\">\\n      </div>\\n\\n      <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen()\\\" [ngClass]=\\\"ifEyeOpen ? 'eye-open' : 'eye-close'\\\">\\n      </div>\\n    </div>\\n\\n    <div class=\\\"error-text\\\" *ngIf=\\\"passwordError\\\">{{ passwordError }}</div>\\n\\n    <div class=\\\"input-password-wrapper\\\">\\n      <div class=\\\"label\\\" translate>NEW_PASSWORD</div>\\n      <div class=\\\"input-wrapper\\\">\\n        <input (keyup)=\\\"checkPassword1()\\\" [type]=\\\"ifEyeOpen1 ? 'number' : 'password'\\\" inputmode=\\\"decimal\\\" [(ngModel)]=\\\"password1\\\"\\n          placeholder=\\\"{{ 'PAYMENT_PASSWORD_RULE' | translate }}\\\">\\n      </div>\\n\\n      <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen1()\\\" [ngClass]=\\\"ifEyeOpen1 ? 'eye-open' : 'eye-close'\\\">\\n      </div>\\n    </div>\\n\\n    <div class=\\\"error-text\\\" *ngIf=\\\"passwordError1\\\">{{ passwordError1 }}</div>\\n\\n    <div class=\\\"input-password-wrapper\\\">\\n      <div class=\\\"label\\\" translate=\\\"\\\">CONFIRM_PASSWORD</div>\\n      <div class=\\\"input-wrapper\\\">\\n        <input (keyup)=\\\"checkPassword2()\\\" [type]=\\\"ifEyeOpen2 ? 'number' : 'password'\\\" [(ngModel)]=\\\"password2\\\"\\n          placeholder=\\\"{{ 'CONFIRM_PASSWORD' | translate }}\\\">\\n      </div>\\n\\n      <div class=\\\" eye\\\" tappable (click)=\\\"toggleEyeOpen2()\\\" [ngClass]=\\\"ifEyeOpen2 ? 'eye-open' : 'eye-close'\\\">\\n      </div>\\n    </div>\\n\\n    <div class=\\\"error-text\\\" *ngIf=\\\"passwordError2\\\">{{ passwordError2 }}</div>\\n\\n    <div class=\\\"buttons\\\">\\n      <div class=\\\"confirm-button\\\" [ngClass]=\\\"(passwordError || passwordError1 || passwordError2 || !password1 || !password2 || password1 != password2) ? 'disabled' : ''\\\"\\n      tappable (click)=\\\"changePassword()\\\" translate>CONFIRM</div>\\n    </div>\\n  </div>\\n</ion-content>\\n\\n<div class=\\\"lds-css ng-scope\\\" *ngIf=\\\"ifShowLoading\\\">\\n  <div class=\\\"lds-wrapper\\\">\\n    <div class=\\\"lds-flickr\\\">\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n    </div>\\n    <!-- <div class=\\\"progress\\\">{{ rate }}%</div> -->\\n  </div>\\n</div>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from '../../components/components.module';\nimport { TranslateModule } from \"@ngx-translate/core\";\nimport { PaymentPasswordPage } from './payment-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PaymentPasswordPage]\n})\nexport class PaymentPasswordPageModule {}\n","export default \".main {\\n  padding: 18px;\\n}\\n\\nion-content {\\n  --background: #fff;\\n}\\n\\n.container {\\n  padding: 20px var(--page-padding);\\n}\\n\\n.buttons {\\n  margin-top: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jeXBoZXIwMS9nby9zcmMvZ2l0aHViLmNvbS9jeXBoZXJpdW0vd2FsbGV0YXBwL3NyYy9hcHAvcGFnZXMvcGF5bWVudC1wYXNzd29yZC9wYXltZW50LXBhc3N3b3JkLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcGF5bWVudC1wYXNzd29yZC9wYXltZW50LXBhc3N3b3JkLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0FDQ0o7O0FERUE7RUFDSSxpQ0FBQTtBQ0NKOztBREVBO0VBQ0ksZ0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BheW1lbnQtcGFzc3dvcmQvcGF5bWVudC1wYXNzd29yZC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XG4gICAgcGFkZGluZzogMThweDtcbn1cblxuaW9uLWNvbnRlbnQge1xuICAgIC0tYmFja2dyb3VuZDogI2ZmZjtcbn1cblxuLmNvbnRhaW5lciB7XG4gICAgcGFkZGluZzogMjBweCB2YXIoLS1wYWdlLXBhZGRpbmcpO1xufVxuXG4uYnV0dG9ucyB7XG4gICAgbWFyZ2luLXRvcDogMzBweDtcbn0iLCIubWFpbiB7XG4gIHBhZGRpbmc6IDE4cHg7XG59XG5cbmlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiAjZmZmO1xufVxuXG4uY29udGFpbmVyIHtcbiAgcGFkZGluZzogMjBweCB2YXIoLS1wYWdlLXBhZGRpbmcpO1xufVxuXG4uYnV0dG9ucyB7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { HelperService } from '../../providers/helper/helper.service';\nimport { GlobalService } from '../../providers/global/global.service';\nimport { Platform, NavController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-payment-password',\n  templateUrl: './payment-password.page.html',\n  styleUrls: ['./payment-password.page.scss'],\n})\nexport class PaymentPasswordPage implements OnInit {\n  password = \"\";\n  password1 = \"\";\n  password2 = \"\";\n  isChange = false;\n  ifEyeOpen = false;\n  ifEyeOpen1 = false;\n  ifEyeOpen2 = false;\n\n  passwordError = \"\";\n  passwordError1 = \"\";\n  passwordError2 = \"\";\n\n  ifShowLoading = false;\n\n  wallet: any = {};\n  privateKey: any;\n  action: any;\n\n  constructor(\n    private helper: HelperService,\n    private navCtrl: NavController,\n    private global: GlobalService,\n    private router: Router,\n  ) { \n    let state = this.router.getCurrentNavigation().extras.state;\n    if (state) {\n      this.privateKey = state.privateKey;\n      this.action = state.action;\n    }\n  }\n\n  ngOnInit() {\n    this.wallet = this.global.gWalletList[this.global.currentWalletIndex];\n  }\n\n  toggleEyeOpen() {\n    this.ifEyeOpen = !this.ifEyeOpen;\n  }\n\n  toggleEyeOpen1() {\n    this.ifEyeOpen1 = !this.ifEyeOpen1;\n  }\n\n  toggleEyeOpen2() {\n    this.ifEyeOpen2 = !this.ifEyeOpen2;\n  }\n\n  async checkPassword() {\n    this.passwordError = \"\";\n    if (!this.password) {\n      let error = await this.helper.getTranslate('ORIGINAL_PASSWORD_EMPTY');\n      this.passwordError = error;\n    }\n  }\n\n  async checkPassword1() {\n    this.passwordError1 = \"\";\n    if (!this.password1) {\n      let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n      this.passwordError1 = error;\n    } else if (!/^\\d{6}$/.test(this.password1)) {\n      //密码格式错误\n      let error = await this.helper.getTranslate('PAYMENT_PASSWORD_RULE');\n      this.passwordError1 = error;\n    }\n  }\n\n  async checkPassword2() {\n    this.passwordError2 = \"\";\n    if (!this.password2) {\n      let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n      this.passwordError2 = error;\n    } else if (this.password2 != this.password1) {\n      let error = await this.helper.getTranslate('PASSEORD_DIFFERENT');\n      this.passwordError2 = error;\n    }\n  }\n\n  async changePassword() {\n    if (this.isChange) {\n      await this.checkPassword();\n      if (this.passwordError) {\n        return;\n      }\n    }\n\n    await this.checkPassword1();\n    if (this.passwordError1) {\n      return;\n    }\n\n    await this.checkPassword2();\n    if (this.passwordError2) {\n      return;\n    }\n\n    //开始修改密码\n    this.ifShowLoading = true;\n\n    setTimeout(async () => {\n        this.ifShowLoading = false;\n        //计算新的payment-keystore\n        if (this.privateKey) {\n          let keystore = this.helper.exportKeystore(this.privateKey, this.password1);\n          this.wallet.payment = keystore;\n          this.helper.saveWallet();\n          setTimeout(async () => {\n            let error = await this.helper.getTranslate('CHANGE_PASSWORD_SUCCEED');\n            this.helper.toast(error);\n          }, 50);\n          setTimeout(() => {\n            if (this.action !== 'create') {\n              this.navCtrl.pop();\n            } else {\n              this.navCtrl.navigateRoot('wallet');\n            }\n\n          }, 1000);\n        } else {\n          //密码错误\n          this.ifShowLoading = false;\n          let error = await this.helper.getTranslate('PASSWORD_ERROR');\n          // this.passwordError = error;\n          this.helper.toast(error);\n          setTimeout(() => {\n            this.navCtrl.pop();\n          }, 1000);\n        }\n    }, 50);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}