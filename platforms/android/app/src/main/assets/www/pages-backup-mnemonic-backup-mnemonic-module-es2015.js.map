{"version":3,"sources":["./src/app/pages/backup-mnemonic/backup-mnemonic.page.html","./src/app/pages/backup-mnemonic/backup-mnemonic.module.ts","./src/app/pages/backup-mnemonic/backup-mnemonic.page.scss","./src/app/pages/backup-mnemonic/backup-mnemonic.page.ts"],"names":[],"mappings":"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","file":"pages-backup-mnemonic-backup-mnemonic-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>{{ 'BACKUP_MNEMONIC' | translate }}</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <div class=\\\"main\\\">\\n        <div class=\\\"tips\\\" translate=\\\"\\\">CLICK_MNEMONIC</div>\\n        <div class=\\\"textarea clear\\\">\\n            <div class=\\\"word\\\" *ngFor=\\\"let item of backupList\\\">{{ item.mnemonic }}</div>\\n        </div>\\n\\n        <div class=\\\"mnemonic-grid clear\\\">\\n            <div class=\\\"grid\\\" tappable (click)=\\\"selectMnemonic(mnemonic, i)\\\"\\n                [ngClass]=\\\"isSelect(mnemonic, i) > -1 ? 'active' : ''\\\" *ngFor=\\\"let mnemonic of mnemonicList; let i = index\\\">\\n                {{mnemonic}}</div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"confirm-button bottom-button\\\" tappable (click)=\\\"verifyNmemonic()\\\"\\n        [ngClass]=\\\"backupList.length == mnemonicList.length ? '' : 'disabled'\\\" translate>VERIFY\\n    </div>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { TranslateModule } from \"@ngx-translate/core\";\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BackupMnemonicPage } from './backup-mnemonic.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BackupMnemonicPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [BackupMnemonicPage]\n})\nexport class BackupMnemonicPageModule { }\n","export default \".textarea {\\n  height: auto;\\n  min-height: 60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93c3MvZ28vc3JjL2dpdGh1Yi5jb20vY3lwaGVyaXVtL3dhbGxldGFwcC9zcmMvYXBwL3BhZ2VzL2JhY2t1cC1tbmVtb25pYy9iYWNrdXAtbW5lbW9uaWMucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9iYWNrdXAtbW5lbW9uaWMvYmFja3VwLW1uZW1vbmljLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFDQSxnQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvYmFja3VwLW1uZW1vbmljL2JhY2t1cC1tbmVtb25pYy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGV4dGFyZWEge1xuICAgIGhlaWdodDogYXV0bztcbiAgICBtaW4taGVpZ2h0OiA2MHB4O1xufSIsIi50ZXh0YXJlYSB7XG4gIGhlaWdodDogYXV0bztcbiAgbWluLWhlaWdodDogNjBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { GlobalService } from '../../providers/global/global.service';\nimport { HelperService } from '../../providers/helper/helper.service';\nimport { Storage } from '@ionic/storage';\nimport { Platform, NavController } from '@ionic/angular';\n\n@Component({\n    selector: 'app-backup-mnemonic',\n    templateUrl: './backup-mnemonic.page.html',\n    styleUrls: ['./backup-mnemonic.page.scss'],\n})\nexport class BackupMnemonicPage implements OnInit {\n    mnemonicList = [];\n    backupList = [];\n    wallet;\n\n    constructor(\n        private router: Router,\n        private global: GlobalService,\n        private storage: Storage,\n        private helper: HelperService,\n        private navCtrl: NavController,\n        public activeRouter: ActivatedRoute,\n    ) {\n        if (this.router.getCurrentNavigation().extras.state) {\n            this.wallet = this.router.getCurrentNavigation().extras.state.wallet;\n            console.log(this.wallet.privateKey)\n\n            console.log(this.wallet.mnemonic)\n            //获取助记词\n            let mnemonicList = this.wallet.mnemonic.split(\" \");\n            this.mnemonicList = this.shuffle(mnemonicList);\n            // console.log(Buffer)\n            // try {\n            //     var key = Buffer.from(this.wallet.privateKey.replace('0x', ''), 'hex');\n            //     console.log(key)\n            //     this.keystore = JSON.stringify(EthereumWallet.fromPrivateKey(key).toV3(\"123456\", {\n            //         n: 1024\n            //     }));\n            //     console.log(this.keystore)\n            // } catch (e) {\n            //     console.log(e.message)\n            // }\n\n            // this.wallet.encrypt(\"123456\").then(res => {\n            //     console.log(\"aaaaaa\" + res)\n            //     this.keystore = res;\n            // }).catch(e => {\n            //     console.log(\"sdfsdfds\")\n            // })\n        }\n    }\n\n    shuffle(arr) {\n        function randomsort(a, b) {\n            return Math.random() > .5 ? -1 : 1;\n        }\n        arr.sort(randomsort);\n        return arr;\n    }\n\n    ngOnInit() {\n    }\n\n    selectMnemonic(mnemonic, i) {\n        // let index = this.backupList.indexOf(mnemonic);\n        let index = this.isSelect(mnemonic, i);\n        if (index > -1) {\n            this.backupList.splice(index, 1);\n        } else {\n            this.backupList.push({mnemonic,i});\n        }\n        console.log(this.backupList)\n    }\n    isSelect(mnemonic, i){\n        return this.backupList.findIndex(item => item.mnemonic === mnemonic && item.i === i);\n    }\n\n    async verifyNmemonic() {\n        console.log(\"开始验证...\", this.mnemonicList, this.backupList);\n        let flag = true;\n        let mnemonicList = this.wallet.mnemonic.split(' ');\n        for (let i = 0; i < mnemonicList.length; i++) {\n            if (mnemonicList[i] != this.backupList[i].mnemonic) {\n                flag = false;\n                break;\n            }\n        }\n\n        if (flag) {\n            if (this.global.walletName) {\n                this.wallet.name = this.global.walletName;\n            }\n            this.helper.addWallet(this.wallet, this.global.paymentPassword);\n            this.global.walletName = \"\";\n            //前往首页\n            this.navCtrl.navigateRoot('wallet');\n        } else {\n            let error = await this.helper.getTranslate('MNEMONIC_WRONG');\n            this.helper.toast(error);\n            this.backupList = [];\n        }\n    }\n\n}\n"],"sourceRoot":"webpack:///"}