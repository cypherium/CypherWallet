{"version":3,"sources":["src/app/pages/change-password/change-password.page.html","src/app/pages/change-password/change-password.module.ts","src/app/pages/change-password/change-password.page.scss","src/app/pages/change-password/change-password.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>{{ 'CHANGE_PASSWORD' | translate }}</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <div class=\\\"container\\\">\\n        <div class=\\\"input-password-wrapper\\\">\\n            <div class=\\\"label\\\" translate=\\\"\\\">ORIGINAL_PASSWORD</div>\\n            <div class=\\\"input-wrapper\\\">\\n                <input (input)=\\\"checkPassword()\\\" [type]=\\\"ifEyeOpen ? 'text' : 'password'\\\" [(ngModel)]=\\\"password\\\"\\n                    placeholder=\\\"{{ 'INPUT_ORIGINAL_PASSWORD' | translate }}\\\">\\n            </div>\\n\\n            <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen()\\\" [ngClass]=\\\"ifEyeOpen ? 'eye-open' : 'eye-close'\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"error-text\\\" *ngIf=\\\"passwordError\\\">{{ passwordError }}</div>\\n\\n        <div class=\\\"input-password-wrapper\\\">\\n            <div class=\\\"label\\\" translate>NEW_PASSWORD</div>\\n            <div class=\\\"input-wrapper\\\">\\n                <input (input)=\\\"checkPassword1()\\\" [type]=\\\"ifEyeOpen1 ? 'text' : 'password'\\\" [(ngModel)]=\\\"password1\\\"\\n                    placeholder=\\\"{{ 'PASSWORD_RULE' | translate }}\\\">\\n            </div>\\n\\n            <div class=\\\"eye\\\" tappable (click)=\\\"toggleEyeOpen1()\\\" [ngClass]=\\\"ifEyeOpen1 ? 'eye-open' : 'eye-close'\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"error-text\\\" *ngIf=\\\"passwordError1\\\">{{ passwordError1 }}</div>\\n\\n        <div class=\\\"input-password-wrapper\\\">\\n            <div class=\\\"label\\\" translate=\\\"\\\">CONFIRM_PASSWORD</div>\\n            <div class=\\\"input-wrapper\\\">\\n                <input (input)=\\\"checkPassword2()\\\" [type]=\\\"ifEyeOpen2 ? 'text' : 'password'\\\" [(ngModel)]=\\\"password2\\\"\\n                    placeholder=\\\"{{ 'CONFIRM_PASSWORD' | translate }}\\\">\\n            </div>\\n\\n            <div class=\\\" eye\\\" tappable (click)=\\\"toggleEyeOpen2()\\\" [ngClass]=\\\"ifEyeOpen2 ? 'eye-open' : 'eye-close'\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"error-text\\\" *ngIf=\\\"passwordError2\\\">{{ passwordError2 }}</div>\\n\\n        <div class=\\\"buttons\\\">\\n            <div class=\\\"confirm-button\\\" [ngClass]=\\\"(passwordError1 || passwordError2 || passwordError || !password1|| !password2 || !password || (password1 != password2)) ? 'disabled' : ''\\\" tappable (click)=\\\"changePassword()\\\" translate>CONFIRM</div>\\n        </div>\\n    </div>\\n</ion-content>\\n\\n<div class=\\\"lds-css ng-scope\\\" *ngIf=\\\"ifShowLoading\\\">\\n    <div class=\\\"lds-wrapper\\\">\\n        <div class=\\\"lds-flickr\\\">\\n            <div></div>\\n            <div></div>\\n            <div></div>\\n        </div>\\n        <!-- <div class=\\\"progress\\\">{{ rate }}%</div> -->\\n    </div>\\n</div>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from '../../components/components.module';\nimport { ChangePasswordPage } from './change-password.page';\nimport { TranslateModule } from \"@ngx-translate/core\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChangePasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ChangePasswordPage]\n})\nexport class ChangePasswordPageModule { }\n","export default \".main {\\n  padding: 18px;\\n}\\n\\nion-content {\\n  --background: #fff;\\n}\\n\\n.container {\\n  padding: 20px var(--page-padding);\\n}\\n\\n.buttons {\\n  margin-top: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jeXBoZXIwMS9nby9zcmMvZ2l0aHViLmNvbS9jeXBoZXJpdW0vd2FsbGV0YXBwL3NyYy9hcHAvcGFnZXMvY2hhbmdlLXBhc3N3b3JkL2NoYW5nZS1wYXNzd29yZC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NoYW5nZS1wYXNzd29yZC9jaGFuZ2UtcGFzc3dvcmQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtBQ0NKOztBREVBO0VBQ0ksa0JBQUE7QUNDSjs7QURFQTtFQUNJLGlDQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY2hhbmdlLXBhc3N3b3JkL2NoYW5nZS1wYXNzd29yZC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XG4gICAgcGFkZGluZzogMThweDtcbn1cblxuaW9uLWNvbnRlbnQge1xuICAgIC0tYmFja2dyb3VuZDogI2ZmZjtcbn1cblxuLmNvbnRhaW5lciB7XG4gICAgcGFkZGluZzogMjBweCB2YXIoLS1wYWdlLXBhZGRpbmcpO1xufVxuXG4uYnV0dG9ucyB7XG4gICAgbWFyZ2luLXRvcDogMzBweDtcbn0iLCIubWFpbiB7XG4gIHBhZGRpbmc6IDE4cHg7XG59XG5cbmlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiAjZmZmO1xufVxuXG4uY29udGFpbmVyIHtcbiAgcGFkZGluZzogMjBweCB2YXIoLS1wYWdlLXBhZGRpbmcpO1xufVxuXG4uYnV0dG9ucyB7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { HelperService } from '../../providers/helper/helper.service';\nimport { GlobalService } from '../../providers/global/global.service';\nimport { Platform, NavController } from '@ionic/angular';\n\n\n@Component({\n    selector: 'app-change-password',\n    templateUrl: './change-password.page.html',\n    styleUrls: ['./change-password.page.scss'],\n})\nexport class ChangePasswordPage implements OnInit {\n    password = \"\";\n    password1 = \"\";\n    password2 = \"\";\n\n    ifEyeOpen = false;\n    ifEyeOpen1 = false;\n    ifEyeOpen2 = false;\n\n    passwordError = \"\";\n    passwordError1 = \"\";\n    passwordError2 = \"\";\n\n    ifShowLoading = false;\n\n    wallet: any = {};\n\n    constructor(\n        private helper: HelperService,\n        private navCtrl: NavController,\n        private global: GlobalService,\n    ) { }\n\n    ngOnInit() {\n        this.wallet = this.global.gWalletList[this.global.currentWalletIndex];\n    }\n\n    toggleEyeOpen() {\n        this.ifEyeOpen = !this.ifEyeOpen;\n    }\n\n    toggleEyeOpen1() {\n        this.ifEyeOpen1 = !this.ifEyeOpen1;\n    }\n\n    toggleEyeOpen2() {\n        this.ifEyeOpen2 = !this.ifEyeOpen2;\n    }\n\n    async checkPassword() {\n        this.passwordError = \"\";\n        if (!this.password) {\n            let error = await this.helper.getTranslate('ORIGINAL_PASSWORD_EMPTY');\n            this.passwordError = error;\n        }\n    }\n\n    async checkPassword1() {\n        this.passwordError1 = \"\";\n        if (!this.password1) {\n            let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n            this.passwordError1 = error;\n        } else if (!/^[\\da-zA-Z]{6,18}$/.test(this.password1) || /^[\\d]+$/.test(this.password1) || /^[a-zA-Z]+$/.test(this.password1)) {\n            //密码格式错误\n            let error = await this.helper.getTranslate('PASSWORD_RULE');\n            this.passwordError1 = error;\n        }\n    }\n\n    async checkPassword2() {\n        this.passwordError2 = \"\";\n        if (!this.password2) {\n            let error = await this.helper.getTranslate('NEW_PASSWORD_EMPTY');\n            this.passwordError2 = error;\n        } else if (this.password2 != this.password1) {\n            let error = await this.helper.getTranslate('PASSEORD_DIFFERENT');\n            this.passwordError2 = error;\n        }\n    }\n\n    async changePassword() {\n        await this.checkPassword();\n        if (this.passwordError) {\n            return;\n        }\n\n        await this.checkPassword1();\n        if (this.passwordError1) {\n            return;\n        }\n\n        await this.checkPassword2();\n        if (this.passwordError2) {\n            return;\n        }\n\n        //start to change password\n        this.ifShowLoading = true;\n\n        setTimeout(async () => {\n            //get private key\n            let ret = this.helper.decryptPrivateKey(this.wallet.keystore, this.password);\n            if (ret.flag) {\n                this.ifShowLoading = false;\n                //获取到私钥\n                let privateKey = ret.privateKey;\n                //caculate new keystore\n                let keystore = this.helper.exportKeystore(privateKey, this.password1);\n                this.wallet.keystore = keystore;\n                this.helper.saveWallet();\n                setTimeout(async () => {\n                    let error = await this.helper.getTranslate('CHANGE_PASSWORD_SUCCEED');\n                    this.helper.toast(error);\n                }, 50);\n                setTimeout(() => {\n                    this.navCtrl.pop();\n                }, 1000)\n            } else {\n                //password error\n                this.ifShowLoading = false;\n                let error = await this.helper.getTranslate('PASSWORD_ERROR');\n                this.passwordError = error;\n            }\n        }, 50)\n    }\n\n}\n"],"sourceRoot":"webpack:///","file":"pages-change-password-change-password-module-es5.js"}
